{
	"info": {
		"_postman_id": "0079a434-baf3-4884-84a0-2f107f447ca3",
		"name": "01 - RESTful API Fundamentals",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "48982578",
		"_collection_link": "https://www.postman.com/patmcdaniel37-5264329/workspace/525a51e9-7535-4d44-b9b5-1a0a35d42ce5/collection/48982578-0079a434-baf3-4884-84a0-2f107f447ca3?action=share&source=collection_link&creator=48982578"
	},
	"item": [
		{
			"name": "GET All Post",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"//validate reponse code of 200",
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"//validate response time is less than 1000ms",
							"pm.test(\"Response time is less than 1000ms\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(1000);",
							"});",
							"",
							"//validate response is an array",
							"pm.test(\"Response is an array\", function () {",
							"    pm.expect(pm.response.json()).to.be.an('array');",
							"});",
							"",
							"//validate response contains at least 100 elements",
							"pm.test(\"Array contains at least 100 elements\", function () {",
							"    pm.expect(pm.response.json()).to.have.lengthOf.at.least(100);",
							"});",
							"",
							"//validate first user id is equal to 1",
							"pm.test(\"First element has correct id\", function () {",
							"    pm.expect(pm.response.json()[0].id).to.equal(1);",
							"});",
							"",
							"//set collectionVariables \"firstUserId\" to be equal to the first user id in the response body",
							"pm.test(\"First element has correct userId\", function () {",
							"    pm.collectionVariables.set(\"firstUserId\", pm.response.json()[0].userId);",
							"    pm.expect(pm.response.json()[0].userId).to.equal(1);",
							"});",
							"",
							"//validate each post has userId, id, title, body",
							"pm.test(\"Each post has userId, id, title, body\", function(){",
							"    pm.response.json().forEach(function (post) {",
							"        pm.expect(post).to.have.property('userId');",
							"        pm.expect(post).to.have.property('id');",
							"        pm.expect(post).to.have.property('title');",
							"        pm.expect(post).to.have.property('body');",
							"    })",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/posts",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"posts"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET Single Post",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"//outputing the response data to the console for debugging purposes.",
							"console.log(\"Response data: \" + JSON.stringify(pm.response.json())); ",
							"",
							"//validate reponse code of 200",
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"//validate response time is less than 1000ms",
							"pm.test(\"Response time is less than 1000ms\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(1000);",
							"});",
							"",
							"//validate response is a single object",
							"pm.test(\"Response is a single object\", function () {",
							"    pm.expect(pm.response.json()).to.be.an('object');",
							"});",
							"",
							"//validate first user id is equal to 1",
							"pm.test(\"First element has correct id\", function () {",
							"    pm.expect(pm.response.json().id).to.equal(1);",
							"});",
							"",
							"//set collectionVariables \"firstUserId\" to be equal to the first user id in the response body",
							"pm.test(\"First element has correct userId\", function () {",
							"    pm.expect(pm.response.json().userId).to.equal(1);",
							"});",
							"",
							"//validate each post has userId, id, title, body",
							"pm.test(\"Each post has userId, id, title, body\", function(){",
							"        pm.expect(pm.response.json().hasOwnProperty('userId'));",
							"        pm.expect(pm.response.json().hasOwnProperty('id'));",
							"        pm.expect(pm.response.json().hasOwnProperty('title'));",
							"        pm.expect(pm.response.json().hasOwnProperty('body'));",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/posts/1",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"posts",
						"1"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET Post Comments",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"//validate reponse code of 200",
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"//validate response time is less than 1000ms",
							"pm.test(\"Response time is less than 1000ms\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(1000);",
							"});",
							"",
							"//validate response is an array",
							"pm.test(\"Response is an array\", function () {",
							"    pm.expect(pm.response.json()).to.be.an('array');",
							"});",
							"",
							"//validate all comments came from user 1",
							"pm.test(\"All comments came from user 1\", function(){",
							"    pm.response.json().forEach(function (post) {",
							"        pm.expect(post).to.have.property('postId').to.equal(1);",
							"    })",
							"});",
							"",
							"//validate all email address are correctly format",
							"pm.test(\"Validate email format\", function(){",
							"    pm.response.json().forEach(function (post) {",
							"        pm.expect(post.email).to.match(/^[^@]+@[^@]+\\.[^@]+$/);",
							"    })",
							"});",
							"",
							"//count total comments and display in log",
							"pm.test(\"Log total number of comments\", function(){",
							"    var totalComments = pm.response.json().length;",
							"    console.log(\"Total number of comments: \" + totalComments);",
							"});",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/posts/1/comments",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"posts",
						"1",
						"comments"
					]
				}
			},
			"response": []
		},
		{
			"name": "GET with Query Parameters",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"function getRandomInt(min, max) {",
							"    return Math.floor(Math.random() * (max - min + 1)) + min;",
							"}",
							"",
							"//validate reponse code of 200",
							"pm.test(\"Status code is 200\", function () {",
							"  pm.response.to.have.status(200);",
							"});",
							"",
							"//validate response time is less than 1000ms",
							"pm.test(\"Response time is less than 1000ms\", function () {",
							"    pm.expect(pm.response.responseTime).to.be.below(1000);",
							"});",
							"",
							"//validate response is an array",
							"pm.test(\"Response is an array\", function () {",
							"    pm.expect(pm.response.json()).to.be.an('array');",
							"});",
							"",
							"//validate all comments came from user 1",
							"pm.test(\"All comments came from user 1\", function(){",
							"    pm.response.json().forEach(function (post) {",
							"        pm.expect(post).to.have.property('userId').to.equal(1);",
							"    })",
							"});",
							"",
							"//validate the response if filtered correctly",
							"pm.test(\"Resonse is filtered correctly\", function(){",
							"    pm.response.json().forEach(function (post) {",
							"        pm.expect(post).to.have.property('userId').to.equal(1);",
							"    })",
							"});",
							"",
							"// outputing the post from a random number",
							"pm.test(\"Validate random post\", function () {",
							"    //get max number of posts",
							"    const maxValue = pm.response.json().length;",
							"    //get random number between 1 and maxValue",
							"    const randomNumber = getRandomInt(1, maxValue);",
							"    //outputing post of randomNumber",
							"    console.log(\"Post from random number: \" +  randomNumber)",
							"    console.log(pm.response.json()[randomNumber]);",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [],
				"url": {
					"raw": "{{base_url}}/posts?userId=1",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"posts"
					],
					"query": [
						{
							"key": "userId",
							"value": "1"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Create New Post",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"//validate response is 201",
							"pm.test(\"Status code is 201\", function () {",
							"    pm.expect(pm.response.to.have.status(201));",
							"});",
							"",
							"//validate response is json",
							"pm.test(\"Response is JSON\", function () {",
							"    pm.expect(pm.response.to.be.json);",
							"});",
							"",
							"//validate response body contains id",
							"pm.test(\"Response body contains id\", function () {",
							"    pm.expect(pm.response.to.have.jsonBody('id'));",
							"});",
							"",
							"//validate response body contains id with value 101",
							"pm.test(\"Response body id is 101\", function () {",
							"    pm.expect(pm.response.json().id).to.eql(101);",
							"});",
							"",
							"//validate response body contains title with value \"myTestTitle\"",
							"pm.test(\"Response body title is myTestTitle\", function () {",
							"    pm.expect(pm.response.json().title).to.eql(\"myTestTitle\");",
							"});",
							"",
							"//validate response body contains body with value \"myTestBody\"",
							"pm.test(\"Response body body is myTestBody\", function () {",
							"    pm.expect(pm.response.json().body).to.eql(\"myTestBody\");",
							"});",
							"",
							"//validate response body contains userId",
							"pm.test(\"Response body contains userId\", function () {",
							"    pm.expect(pm.response.json().userId).to.eql(1);",
							"});",
							"",
							"//save id of the first post to collection variables",
							"pm.test(\"Save first post id to collection variables\", function () {",
							"    pm.expect(pm.collectionVariables.set(\"firstPostId\", pm.response.json().id));",
							"});"
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"title\": \"myTestTitle\",\n  \"body\": \"myTestBody\",\n  \"userId\": {{firstUserId}}\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/posts",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"posts"
					]
				}
			},
			"response": []
		},
		{
			"name": "Create New Post Copy",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Parse JSON response",
							"let responseJson = pm.response.json();",
							"",
							"//validate response is json",
							"pm.test(\"Response is JSON\", function () {",
							"    pm.expect(pm.response.to.be.json);",
							"});",
							"",
							"// Log created post details to console",
							"console.log(\"Created Post Details:\", responseJson);",
							"",
							"// Test: Status code is 201 Created",
							"pm.test(\"Status code is 201\", function () {",
							"    pm.response.to.have.status(201);",
							"});",
							"",
							"// Test: Created post contains dynamic title and body",
							"pm.test(\"Response contains dynamic title and body\", function () {",
							"    pm.expect(responseJson.title).to.eql(pm.variables.get(\"postTitle\"));",
							"    pm.expect(responseJson.body).to.eql(pm.variables.get(\"postBody\"));",
							"});",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				},
				{
					"listen": "prerequest",
					"script": {
						"exec": [
							"// Generate random title and body using pm.variables.set",
							"const randomTitle = pm.variables.replaceIn(\"{{$randomWord}} Post Title\");",
							"const randomBody = pm.variables.replaceIn(\"This is a body with {{$randomWord}} content\");",
							"",
							"pm.variables.set(\"postTitle\", randomTitle);",
							"pm.variables.set(\"postBody\", randomBody);",
							""
						],
						"type": "text/javascript",
						"packages": {},
						"requests": {}
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"title\": \"{{postTitle}}\",\n  \"body\": \"{{postBody}}\",\n  \"userId\": {{firstUserId}}\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/posts",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"posts"
					]
				}
			},
			"response": []
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": ""
		},
		{
			"key": "response",
			"value": ""
		},
		{
			"key": "firstPostBody",
			"value": ""
		},
		{
			"key": "firstPostUserId",
			"value": ""
		},
		{
			"key": "firstPostId",
			"value": ""
		},
		{
			"key": "firstUserId",
			"value": ""
		}
	]
}