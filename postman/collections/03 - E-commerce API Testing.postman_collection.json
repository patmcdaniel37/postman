{
	"info": {
		"_postman_id": "bc568b81-84fc-4293-9957-b58f7a0c2938",
		"name": "03 - E-commerce API Testing",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "48982578",
		"_collection_link": "https://www.postman.com/patmcdaniel37-5264329/workspace/api-testing/collection/48982578-bc568b81-84fc-4293-9957-b58f7a0c2938?action=share&source=collection_link&creator=48982578"
	},
	"item": [
		{
			"name": "Products",
			"item": [
				{
					"name": "Get All Products",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is an array",
									"pm.test(\"Response is an array\", function () {",
									"    pm.expect(pm.response.json()).to.be.an('array');",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.response.json().forEach(function (json) {",
									"        pm.expect(json).to.have.property('id');",
									"        pm.expect(json).to.have.property('title');",
									"        pm.expect(json).to.have.property('price');",
									"        pm.expect(json.price).to.be.a('number');",
									"        pm.expect(json).to.have.property('description');",
									"        pm.expect(json).to.have.property('category');",
									"        pm.expect(json).to.have.property('image');",
									"        pm.expect(json).to.have.property('rating');",
									"        pm.expect(json.rating).to.have.property('rate');",
									"        pm.expect(json.rating).to.have.property('count');",
									"    })",
									"});",
									"",
									"//Log the total number of entries",
									"console.log(\"Total number of entries: \" + pm.response.json().length);",
									"",
									"//storing the Id from the second entry to be used later",
									"console.log(pm.response.json()[1].id);",
									"pm.collectionVariables.set(\"collection_level_product_id\", pm.response.json()[1].id);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Single Product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('title');",
									"    pm.expect(json).to.have.property('price');",
									"    pm.expect(json.price).to.be.a('number');",
									"    pm.expect(json).to.have.property('description');",
									"    pm.expect(json).to.have.property('category');",
									"    pm.expect(json).to.have.property('image');",
									"    pm.expect(json).to.have.property('rating');",
									"    pm.expect(json.rating).to.have.property('rate');",
									"    pm.expect(json.rating).to.have.property('count');",
									"});",
									"",
									"//validate price is > 0",
									"pm.test(\"Validate price is greater than 0\", function(){",
									"    pm.expect(json.price > 0);",
									"})",
									"",
									"//log product information",
									"console.log(\"Product Name: \" + json.title);",
									"console.log(\"Product Price: \" + json.price);",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{collection_level_product_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Limited Products",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"Validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response has 5 items",
									"pm.test(\"Response is an array\", function () {",
									"    pm.expect(json.length).to.eq(5);",
									"});",
									"",
									"//Log the total number of entries",
									"console.log(\"Total number of entries: \" + json.length);",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products?limit=5",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							],
							"query": [
								{
									"key": "limit",
									"value": "5"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Sorted Products",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.response.json().forEach(function (json) {",
									"        pm.expect(json).to.have.property('id');",
									"        pm.expect(json).to.have.property('title');",
									"        pm.expect(json).to.have.property('price');",
									"        pm.expect(json.price).to.be.a('number');",
									"        pm.expect(json).to.have.property('description');",
									"        pm.expect(json).to.have.property('category');",
									"        pm.expect(json).to.have.property('image');",
									"        pm.expect(json).to.have.property('rating');",
									"        pm.expect(json.rating).to.have.property('rate');",
									"        pm.expect(json.rating).to.have.property('count');",
									"    })",
									"});",
									"",
									"pm.test(\"Validate descending order\", function() {",
									"    let counter = Number.MAX_SAFE_INTEGER;",
									"    const json = pm.response.json();",
									"    json.forEach(function(item) {",
									"        pm.expect(item.id, `Id ${item.id} should be <= ${counter}`).to.be.at.most(counter);",
									"        counter = item.id;",
									"    });",
									"});",
									"",
									"//Log the total number of entries",
									"console.log(\"Total number of entries: \" + pm.response.json().length);",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/products?sort=desc",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							],
							"query": [
								{
									"key": "sort",
									"value": "desc"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Product Categories",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate reponse is an array",
									"pm.test('Validate response is an Array', function(){",
									"    pm.expect(json).to.be.an(\"array\");",
									"});",
									"",
									"//saving first category to collectionVariables",
									"pm.collectionVariables.set(\"category\", json[0]);",
									"",
									"//logging all categories",
									"console.log(\"Category: \" + json);",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/categories",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"categories"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Products by Category",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate each record has the category of {{category}}",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.response.json().forEach(function (json) {",
									"        pm.expect(json.category).to.eq(pm.collectionVariables.get(\"category\"));",
									"    })",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"protocolProfileBehavior": {
						"disableBodyPruning": true
					},
					"request": {
						"method": "GET",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/category/{{category}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"category",
								"{{category}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Add New Product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 201\", function(){",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('title');",
									"    pm.expect(json).to.have.property('price');",
									"    pm.expect(json).to.have.property('description');",
									"    pm.expect(json).to.have.property('category');",
									"    pm.expect(json).to.have.property('image');",
									"});",
									"",
									"//saving new product to collectionVariables",
									"pm.collectionVariables.set(\"newProduct\", json.id);",
									"",
									"//saving product price to collectionVariables",
									"pm.collectionVariables.set(\"productPrice\", json.price);",
									"",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\" : \"USB-C Flash Drive 99TB\",\n    \"price\" : \"99.99\", \n    \"description\" : \"USB-C Flash Drive 99TB\",\n    \"image\" : \"https://fakestoreapi.com/img/123ABC_99TB.png\", \n    \"category\" : \"electronics\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update New Product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('title');",
									"    pm.expect(json).to.have.property('price');",
									"    pm.expect(json).to.have.property('description');",
									"    pm.expect(json).to.have.property('category');",
									"    pm.expect(json).to.have.property('image');",
									"});",
									"",
									"//verify product price changed",
									"pm.test(\"Verfiy product price changed\", function(){",
									"    pm.expect(json.price).does.not.eq(pm.collectionVariables.get(\"productPrice\"));",
									"})",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PUT",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"title\" : \"USB-C Flash Drive 99TB\",\n    \"price\" : \"89.99\", \n    \"description\" : \"USB-C Flash Drive 99TB\",\n    \"image\" : \"https://fakestoreapi.com/img/123ABC_99TB.png\", \n    \"category\" : \"electronics\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/{{newProduct}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{newProduct}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Product Price",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('price');",
									"});",
									"",
									"//verify product price changed",
									"pm.test(\"Verfiy product price changed\", function(){",
									"    pm.expect(json.price).does.not.eq(pm.collectionVariables.get(\"productPrice\"));",
									"})",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"price\" : \"94.99\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/{{newProduct}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{newProduct}}"
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Product",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is empty",
									"pm.test(\"Response for delete should be empty\", function(){",
									"   pm.expect(pm.response.text()).to.eql(\"\");",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/products/{{newProduct}}",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"products",
								"{{newProduct}}"
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Carts",
			"item": [
				{
					"name": "Get All Carts",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is an array (can be empty)",
									"pm.test(\"Response is an array\", function () {",
									"    pm.expect(json).to.be.an('array');",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    json.forEach(item => {",
									"        pm.expect(item).to.have.property('id');",
									"        pm.expect(item).to.have.property('userId');",
									"        pm.expect(item).to.have.property('date');",
									"        pm.expect(item).to.have.property('products');",
									"        pm.expect(item).to.have.property('__v');",
									"",
									"        // Validate each product if present",
									"        item.products.forEach(prod => {",
									"            pm.expect(prod).to.have.property('productId');",
									"            pm.expect(prod).to.have.property('quantity');",
									"            pm.expect(prod.productId).to.be.a('number');",
									"            pm.expect(prod.quantity).to.be.a('number');",
									"        });",
									"    })",
									"});",
									"",
									"//Log the total number of entries",
									"console.log(\"Total number of entries: \" + json.length);",
									"//saving this value to be used for a random number in another test",
									"pm.collectionVariables.set(\"collection_level_number_of_entries\", json.length)",
									"",
									"//storeing the Id from the second entry to be used later",
									"console.log(json[0].id);",
									"pm.collectionVariables.set(\"collection_level_cart_id\", json[0].id);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/carts",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"carts"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get First Carts",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"let counter = 0;",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is an object (can be empty)",
									"pm.test(\"Response is an object\", function () {",
									"    pm.expect(pm.response.json()).to.be.an('object');",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('userId');",
									"    pm.expect(json).to.have.property('date');",
									"    pm.expect(json).to.have.property('products');",
									"    pm.expect(json).to.have.property('__v');",
									"",
									"    // Validate each product if present",
									"    json.products.forEach(prod => {",
									"        counter++;",
									"        pm.expect(prod).to.have.property('productId');",
									"        pm.expect(prod).to.have.property('quantity');",
									"        pm.expect(prod.productId).to.be.a('number');",
									"        pm.expect(prod.quantity).to.be.a('number');",
									"    });",
									"});",
									"",
									"//validate userId is 1",
									"pm.test(\"Validate cart is for userId: 1\", function(){",
									"    pm.expect(json.userId).to.be.eq(1);",
									"})",
									"",
									"console.log(\"Total items: \"+ counter);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/carts/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"carts",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Get Random User Cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"let counter = 0;",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is an object (can be empty)",
									"pm.test(\"Response is an object\", function () {",
									"    pm.expect(pm.response.json()).to.be.an('object');",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('userId');",
									"    pm.expect(json).to.have.property('date');",
									"    pm.expect(json).to.have.property('products');",
									"    pm.expect(json).to.have.property('__v');",
									"",
									"    // Validate each product if present",
									"    json.products.forEach(prod => {",
									"        counter++;",
									"        pm.expect(prod).to.have.property('productId');",
									"        pm.expect(prod).to.have.property('quantity');",
									"        pm.expect(prod.productId).to.be.a('number');",
									"        pm.expect(prod.quantity).to.be.a('number');",
									"    });",
									"});",
									"",
									"console.log(\"Total items: \"+ counter);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"let randomNumber = Math.ceil(Math.random() * pm.collectionVariables.get(\"collection_level_number_of_entries\"));",
									"pm.variables.set(\"id\", randomNumber);",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/carts/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"carts",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add Cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"let counter = 0;",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 201\", function(){",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"//validate response is an object (can be empty)",
									"pm.test(\"Response is an object\", function () {",
									"    pm.expect(pm.response.json()).to.be.an('object');",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('userId');",
									"    pm.expect(json).to.have.property('date');",
									"    pm.expect(json).to.have.property('products');",
									"",
									"    // Validate each product if present",
									"    json.products.forEach(prod => {",
									"        counter++;",
									"        pm.expect(prod).to.have.property('productId');",
									"        pm.expect(prod).to.have.property('quantity');",
									"        pm.expect(prod.productId).to.be.a('number');",
									"        pm.expect(prod.quantity).to.be.a('number');",
									"    });",
									"});",
									"",
									"pm.collectionVariables.set(\"collection_level_new_cart_id\", json.id)"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"//get the current date to be used for the date when adding to a cart",
									"pm.variables.set(\"currentDate\", new Date().toISOString());",
									"//generate a random product Id for the product Id",
									"pm.variables.set(\"randomProductId\", Math.ceil(Math.random() * 10));",
									"//generate a random number between 1-10 for the quantity",
									"pm.variables.set(\"randomQuantity\", Math.ceil(Math.random() * 10));",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"userId\": 1,\n    \"date\": \"{{currentDate}}\",\n    \"products\": [\n        {\n            \"productId\": {{randomProductId}},\n            \"quantity\": {{randomQuantity}}\n        }\n    ],\n    \"__v\": 0\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/carts/",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"carts",
								""
							]
						}
					},
					"response": []
				},
				{
					"name": "Update Cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"let counter = 0;",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is an object (can be empty)",
									"pm.test(\"Response is an object\", function () {",
									"    pm.expect(pm.response.json()).to.be.an('object');",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('userId');",
									"    pm.expect(json).to.have.property('date');",
									"    pm.expect(json).to.have.property('products');",
									"",
									"    // Validate each product if present",
									"    json.products.forEach(prod => {",
									"        counter++;",
									"        pm.expect(prod).to.have.property('productId');",
									"        pm.expect(prod).to.have.property('quantity');",
									"        pm.expect(prod.productId).to.be.a('number');",
									"        pm.expect(prod.quantity).to.be.a('number');",
									"    });",
									"});",
									"",
									"pm.collectionVariables.set(\"collection_level_new_cart_id\", json.id)"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// //get the current date to be used for the date when adding to a cart",
									"pm.variables.set(\"currentDate\", new Date().toISOString());",
									"//generate a random product Id for the product Id",
									"pm.variables.set(\"randomProductId\", Math.ceil(Math.random() * 10));",
									"//generate a random number between 1-10 for the quantity",
									"pm.variables.set(\"randomQuantity\", Math.ceil(Math.random() * 10));",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": {{collection_level_new_cart_id}},\n    \"userId\": 1,\n    \"date\": \"{{currentDate}}\",\n    \"products\": [\n        {\n            \"productId\": {{randomProductId}},\n            \"quantity\": {{randomQuantity}}\n        }\n    ]\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/carts/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"carts",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{collection_level_new_cart_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete Cart",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is null",
									"pm.test(\"Response for delete should be null\", function(){",
									"   pm.expect(pm.response.json()).to.be.null;",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/carts/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"carts",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{collection_level_new_cart_id}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Get All Users",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is an array (can be empty)",
									"pm.test(\"Response is an array\", function () {",
									"    pm.expect(json).to.be.an('array');",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    json.forEach(item => {",
									"        pm.expect(item).to.have.property('address');",
									"        pm.expect(item.address).to.have.property('geolocation');",
									"        pm.expect(item.address.geolocation).to.have.property('lat');",
									"        pm.expect(item.address.geolocation).to.have.property('long');",
									"        pm.expect(item.address).to.have.property('city');",
									"        pm.expect(item.address).to.have.property('street');",
									"        pm.expect(item.address).to.have.property('number');",
									"        pm.expect(item.address).to.have.property('zipcode');",
									"        pm.expect(item).to.have.property('id');",
									"        pm.expect(item).to.have.property('email');",
									"        pm.expect(item.email).to.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/);",
									"        pm.expect(item).to.have.property('username');",
									"        pm.expect(item).to.have.property('password');",
									"        pm.expect(item).to.have.property('name');",
									"        pm.expect(item.name).to.have.property('firstname');",
									"        pm.expect(item.name).to.have.property('lastname');",
									"        pm.expect(item).to.have.property('phone');",
									"        pm.expect(item).to.have.property('__v');        ",
									"    })",
									"});",
									"",
									"//Log the total number of entries",
									"console.log(\"Total number of entries: \" + json.length);",
									"",
									"//storeing the Id from the second entry to be used later",
									"console.log(json[0].id);",
									"pm.collectionVariables.set(\"collection_level_user_id\", json[0].id);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Get First User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"let counter = 0;",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is an object (can be empty)",
									"pm.test(\"Response is an object\", function () {",
									"    pm.expect(pm.response.json()).to.be.an('object');",
									"});",
									"",
									"//validate record has id, title, price, description, category, image",
									"pm.test(\"Record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('address');",
									"    pm.expect(json.address).to.have.property('geolocation');",
									"    pm.expect(json.address.geolocation).to.have.property('lat');",
									"    pm.expect(json.address.geolocation).to.have.property('long');",
									"    pm.expect(json.address).to.have.property('city');",
									"    pm.expect(json.address).to.have.property('street');",
									"    pm.expect(json.address).to.have.property('number');",
									"    pm.expect(json.address).to.have.property('zipcode');",
									"    pm.expect(json).to.have.property('id');",
									"    pm.expect(json).to.have.property('email');",
									"    pm.expect(json.email).to.match(/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/);",
									"    pm.expect(json).to.have.property('username');",
									"    pm.expect(json).to.have.property('password');",
									"    pm.expect(json).to.have.property('name');",
									"    pm.expect(json.name).to.have.property('firstname');",
									"    pm.expect(json.name).to.have.property('lastname');",
									"    pm.expect(json).to.have.property('phone');",
									"    pm.expect(json).to.have.property('__v');",
									"});",
									"",
									"//validate userId is 1",
									"pm.test(\"Validate cart is for userId: 1\", function(){",
									"    pm.expect(json.id).to.be.eq(1);",
									"})",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "1"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Add User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"let counter = 0;",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 201\", function(){",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"//validate response is an object (can be empty)",
									"pm.test(\"Response is an object\", function () {",
									"    pm.expect(pm.response.json()).to.be.an('object');",
									"});",
									"",
									"//validate response has an Id field",
									"pm.test(\"Validate response has an Id field\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"});",
									"",
									"console.log(\"New userId: \" + json.id);",
									"pm.collectionVariables.set(\"collection_level_last_user_id\", json.id)"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": 11,\n    \"username\": \"{{$randomUserName}}\",\n    \"email\": \"{{$randomEmail}}\",\n    \"password\": \"{{$randomPassword}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/users",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users"
							]
						}
					},
					"response": []
				},
				{
					"name": "Update User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"let counter = 0;",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is an object (can be empty)",
									"pm.test(\"Response is an object\", function () {",
									"    pm.expect(pm.response.json()).to.be.an('object');",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('id');",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									"// //get the current date to be used for the date when adding to a cart",
									"pm.variables.set(\"currentDate\", new Date().toISOString());",
									"//generate a random product Id for the product Id",
									"pm.variables.set(\"randomProductId\", Math.ceil(Math.random() * 10));",
									"//generate a random number between 1-10 for the quantity",
									"pm.variables.set(\"randomQuantity\", Math.ceil(Math.random() * 10));",
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "PATCH",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"id\": {{collection_level_last_user_id}},\n    \"username\": \"{{$randomUserName}}\",\n    \"email\": \"{{$randomEmail}}\",\n    \"password\": \"{{$randomPassword}}\"\n}\n",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/users/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{collection_level_last_user_id}}"
								}
							]
						}
					},
					"response": []
				},
				{
					"name": "Delete User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"//validate response code",
									"pm.test(\"validate response code is 200\", function(){",
									"    pm.response.to.have.status(200);",
									"});",
									"",
									"//validate response is null",
									"pm.test(\"Response for delete should be null\", function(){",
									"   pm.expect(pm.response.json()).to.be.null;",
									"});"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						},
						{
							"listen": "prerequest",
							"script": {
								"exec": [
									""
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "DELETE",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/users/:id",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"users",
								":id"
							],
							"variable": [
								{
									"key": "id",
									"value": "{{collection_level_last_user_id}}"
								}
							]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Authentication",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"const json = pm.response.json();",
									"",
									"//validate response code",
									"pm.test(\"validate response code is 201\", function(){",
									"    pm.response.to.have.status(201);",
									"});",
									"",
									"//validate response is an object (can be empty)",
									"pm.test(\"Response is an object\", function () {",
									"    pm.expect(json).to.be.an('object');",
									"});",
									"",
									"//validate each record has id, title, price, description, category, image",
									"pm.test(\"Each record has the correct fields\", function(){",
									"    pm.expect(json).to.have.property('token');",
									"});",
									"",
									"//storing token to be used later",
									"pm.collectionVariables.set(\"collection_level_auth_token\", json.token);"
								],
								"type": "text/javascript",
								"packages": {},
								"requests": {}
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"username\": \"mor_2314\",\n    \"password\": \"83r5^_\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"auth",
								"login"
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"auth": {
		"type": "apikey",
		"apikey": [
			{
				"key": "key",
				"value": "api_token",
				"type": "string"
			},
			{
				"key": "value",
				"value": "{{vault:authorization-secret}}",
				"type": "string"
			}
		]
	},
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"packages": {},
				"requests": {},
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url1",
			"value": ""
		},
		{
			"key": "category",
			"value": ""
		},
		{
			"key": "newProduct",
			"value": ""
		},
		{
			"key": "collection_level_product_id",
			"value": ""
		},
		{
			"key": "productPrice",
			"value": ""
		},
		{
			"key": "collection_level_cart_id",
			"value": ""
		},
		{
			"key": "collection_level_number_of_entries",
			"value": ""
		},
		{
			"key": "collection_level_new_cart_id",
			"value": ""
		},
		{
			"key": "collection_level_user_id",
			"value": ""
		},
		{
			"key": "collection_level_last_user_id",
			"value": ""
		},
		{
			"key": "collection_level_auth_token",
			"value": ""
		}
	]
}